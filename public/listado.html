<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous">
    <link rel="stylesheet" href="./styles.css">
    <title>Listado de Productos</title>
</head>
<body class="vh-100 vw-100 d-flex align-items-center">
    <div class="w-50 p-5 m-5 firstContainer">
        <h3 class="mb-4 text-center">Listado</h3>
        <div class="d-grid col-8 mx-auto mb-4">
            <a class="btn btn-outline-success" href="./index.html">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-list-task" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M2 2.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5V3a.5.5 0 0 0-.5-.5H2zM3 3H2v1h1V3z"></path>
                    <path d="M5 3.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zM5.5 7a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1h-9zm0 4a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1h-9z"></path>
                    <path fill-rule="evenodd" d="M1.5 7a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5V7zM2 7h1v1H2V7zm0 3.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5H2zm1 .5H2v1h1v-1z"></path>
                </svg>
                Agregar
            </a>
        </div>
        <table class="table table-dark table-striped">
            <thead>
                <tr>
                    <th scope="col">Nombre</th>
                    <th scope="col">Precio</th>
                    <th scope="col">Imagen</th>
                </tr>
            </thead>
            <tbody id="tableBody">
                <!-- Filas con Productos -->
            </tbody>
        </table>
    </div>
    <script>
        const table = document.getElementById('tableBody');
        document.addEventListener("DOMContentLoaded", async() => {
            const URL = '/api/productos/';
            const req = await fetch(URL);
            const { message, data } = await req.json();
            data.forEach(product => {
                const tr = document.createElement('tr')
                tr.innerHTML = `<td>${ product.title }</td>
                                <td>${ product.price }</td>
                                <td><img class="mx-auto imgTable" src="${ product.thumbnail }" /></td>`;
                table.appendChild(tr);
            });

        });
    </script>
</body>
</html>